variant: fcos
version: 1.6.0
ignition:
  config:
    merge:
      - local: build/services/cockpit/cockpit.ign
      - local: build/services/tailscale/tailscale.ign
      - local: build/services/kinto/kinto.ign
storage:
  files:
    - path: /etc/hostname
      mode: 0644
      contents:
        inline: homelab.local
    - path: /etc/systemd/zram-generator.conf
      mode: 0644
      contents:
        inline: |
          # This config file enables a /dev/zram0 device with the default settings:
          # — size — same as available RAM or 8GB, whichever is less
          # — compression — most likely lzo-rle
          #
          # To disable, uninstall zram-generator-defaults or create empty
          # /etc/systemd/zram-generator.conf file.
          [zram0]
          zram-size = min(ram, 8192)
    - path: /etc/zincati/config.d/55-updates-strategy.toml
      contents:
        inline: |
          [updates]
          strategy = "periodic"
          [updates.periodic]
          time_zone = "America/Toronto"
          [[updates.periodic.window]]
          days = [ "Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun" ]
          start_time = "03:00"
          length_minutes = 60
passwd:
  users:
    - name: core
      # Security: insecure hash for testing only
      password_hash: $y$j9T$hZEAXBu3d9VCfNe.Po9Xx/$aKm8Lm7NKnt9ZtT4aXl4dlEs.a/IDeDSzYb0YlaBtw2
